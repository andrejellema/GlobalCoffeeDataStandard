{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/andrejellema/GlobalCoffeeDataStandard/master/schema/global-coffee-data-standard.schema.json",
  "title": "GlobalCoffeeDataset",
  "description": "This schema displays the initial basic Indicators for farm-level coffee sustainability, as originally determined by the GCP and the SPF Indicator Working Group. COSA--with feedback from the members of the Global Expert Committee--developed and synthesized practical metrics to operationalize the indicators so they can be functional across origins and comparable over time. The approach builds on global experience refined with tens of thousands of surveys and the expertise of the Committee members.",
  "version": "0.0.4",
  "type": "object",
  "propertyNames": {
    "description": "Property names must be in lower CamelCase",
    "pattern": "^[a-z][A-Za-z0-9_]*$"
  },
  "additionalProperties": false,
  "required": [
    "globalCoffeeDatasetId"
  ],
  "properties": {
    "globalCoffeeDatasetId": {
      "description": "The unique identifier for a dataset",
      "$ref": "/global-unique-id.json"
    },
    "schemaVersion": {
      "description": "The version number of the schema. When not provided the latest version of the schema will be used to validate the dataset",
      "type": "string",
      "pattern": "^[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}$"
    },
    "farmer": {
      "description": "The farmer characteristics",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "general",
        "social"
      ],
      "properties": {
        "general": {
          "description": "The general farmer characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "farmerId",
            "name",
            "address",
            "dateOfBirth",
            "gender",
            "farmIds"
          ],
          "properties": {
            "farmerId": {
              "title": "Globally Unique ID of the farmer",
              "description": "Globally Unique ID of the recording of the farmer at a specific time and by a specific organisation.",
              "$ref": "/global-unique-id.json"
            },
            "name": {
              "title": "First and last name(s) of the farmer surveyed",
              "description": "First and last name(s) of the farmer surveyed. Initials should be avoided when possible. In places where farmers use only one name (a family name), that name should be entered as the Last Name and an appropriate prefix or 'Farmer' could be entered as the First Name.",
              "type": "object",
              "additionalProperties": false,
              "required": [
                "lastName"
              ],
              "properties": {
                "firstName": {
                  "title": "First name(s) of the farmer surveyed",
                  "description": "First name(s) of the farmer surveyed. In places where farmers use only one name (a family name), that name should be entered as the Last Name and an appropriate prefix or 'Farmer' could be entered as the First Name.",
                  "type": "string"
                },
                "lastName": {
                  "title": "Last name of the farmer surveyed",
                  "description": "Last name of the farmer surveyed. Initials should be avoided when possible. In places where farmers use only one name (a family name), that name should be entered as the Last Name and an appropriate prefix or 'Farmer' could be entered as the First Name.",
                  "type": "string"
                }
              }
            },
            "address": {
              "title": "The location of the farm",
              "description": "Generally, data should include Country and then State/Department and Municipality/District, unless the address is collected for the sake of auditing. This should be the location of the farm itself (main plot), not the home of the farmer, if different.",
              "$ref": "/address.json"
            },
            "dateOfBirth": {
              "title": "Date of birth.",
              "description": "Data point used to understand the relative presence of youth and calculate youth engagement: % of producers in the sustainability program or supply chain 35 years old and under",
              "examples": [
                "2016-08-17",
                "1973-05-03"
              ],
              "type": "string",
              "pattern": "^[12][0-9]{3}-[01][0-9]-[01][0-9]$",
              "format": "full-date"
            },
            "gender": {
              "title": "Gender",
              "description": "Data point used to understand the relative presence of women and to calculate women's engagement and the outcomes they experience as diverse from men: % of women in the sustainability program or supply chain",
              "type": "string",
              "enum": [
                "Female",
                "Male",
                "Other",
                "Prefer not to say"
              ]
            },
            "farmIds": {
              "title": "Farm Ids",
              "description": "Which farms belong to this farmer. At least one is required.",
              "type": "array",
              "uniqueItems": true,
              "minItems": 1,
              "items": {
                "$ref": "/global-unique-id.json"
              }
            },
            "thirdPartyIds": {
              "title": "Third-party identifier",
              "description": "When this dataset is reused by another organization who needs to use their own Global Unique Identifier, the original identifier can be saved here, to track history and origin.",
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "/global-unique-id.json"
              },
              "additionalItems": false,
              "additionalProperties": false
            }
          }
        },
        "social": {
          "description": "The social farmer characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "povertyLevel",
            "childLabour",
            "hunger"
          ],
          "properties": {
            "povertyLevel": {
              "title": "Poverty level",
              "description": "Comparison of total household revenue to International (World Bank) Poverty Line (total divided by # adult individuals in hh)",
              "type": "object",
              "additionalProperties": false,
              "required": [
                "totalHouseholdIncome",
                "householdMembers"
              ],
              "properties": {
                "totalHouseholdIncome": {
                  "title": "Total household income",
                  "description": "Total household income in USD",
                  "type": "number",
                  "minimum": 0
                },
                "householdMembers": {
                  "title": "Household members",
                  "description": "Number of adults in the household",
                  "type": "integer",
                  "minimum": 1
                }
              }
            },
            "childLabour": {
              "title": "Child labour",
              "type": "object",
              "additionalProperties": false,
              "required": [
                "schoolAgeHouseholdMembers",
                "hazardousProhibition"
              ],
              "properties": {
                "schoolAgeHouseholdMembers": {
                  "title": "School-age household members",
                  "description": "% of school-age household members, under age 18, who have completed appropriate grade level for their age",
                  "$ref": "#/definitions/percentage"
                },
                "hazardousProhibition": {
                  "title": "Prohibition of children in hazardous working conditions",
                  "description": "Are young workers (those under age 18) working in hazardous conditions (applying chemical pesticides, using hazardous machinery, moving excessive weights/loads, etc.)",
                  "$ref": "#/definitions/yesNo"
                }
              }
            },
            "hunger": {
              "title": "Hunger days",
              "description": "Number of days in past year that any member of household cut food consumption due to lack of food.",
              "type": "string",
              "enum": [
                "0 days",
                "1-9 days",
                "10-19 days",
                "20-29 days",
                "30 or more days"
              ]
            }
          }
        }
      }
    },
    "plot": {
      "description": "The plot characteristics",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "general",
        "economic"
      ],
      "properties": {
        "general": {
          "description": "The general plot characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "plotId",
            "farmId",
            "boundary",
            "area"
          ],
          "properties": {
            "plotId": {
              "title": "The unique ID of the plot",
              "description": "Globally Unique ID of the recording of the plot at a specific time and by a specific organisation.",
              "$ref": "/global-unique-id.json"
            },
            "farmId": {
              "title": "To which farm belongs this plot",
              "description": "Globally Unique ID farmId",
              "$ref": "/global-unique-id.json"
            },
            "boundary": {
              "title": "The boundary of the plot",
              "anyOf": [
                {
                  "$ref": "/MultiPolygon.json"
                },
                {
                  "$ref": "/Polygon.json"
                }
              ]
            },
            "area": {
              "title": "Area of the plot",
              "type": "number",
              "minimum": 0
            },
            "thirdPartyIds": {
              "title": "Third-party identifier",
              "description": "When this dataset is reused by another organization who needs to use their own Global Unique Identifier, the original identifier can be saved here, to track history and origin.",
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "/global-unique-id.json"
              },
              "additionalItems": false,
              "additionalProperties": false
            }
          }
        },
        "economic": {
          "description": "The economic plot characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "yield",
            "productivity"
          ],
          "properties": {
            "yield": {
              "title": "Yield",
              "description": "kgs of GBE (harvested)",
              "type": "number",
              "minimum": 0
            },
            "productivity": {
              "title": "Productivity",
              "description": "Total revenue from coffee sales minus total costs for coffee production (Reported in USD/ha of coffee productive area.)",
              "$ref": "#/definitions/positiveNumber"

            }
          }
        }
      }
    }
  },
  "definitions": {
    "percentage": {
      "title": "The percentage, 0-100",
      "description": "The percentage, from 0 to 100 with decimals allowed",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "positiveNumber": {
      "title": "A positive number > 0",
      "description": "A positive number starting at 0 with decimals allowed",
      "type": "number",
      "minimum": 0
    },
    "greaterThanZero": {
      "title": "The positive number, greater than 0",
      "description": "A positive number starting at greater than 0 with decimals allowed",
      "type": "number",
      "exclusiveMinimum": 0
    },
    "yesNo": {
      "title": "Yes-No enumeration",
      "type": "string",
      "enum": [
        "Yes",
        "No"
      ]
    }
  }
}
