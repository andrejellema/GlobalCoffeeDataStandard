{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/andrejellema/GlobalCoffeeDataStandard/master/schema/global-coffee-data-standard.schema.json",
  "title": "GlobalCoffeeDataset",
  "description": "This schema displays the initial basic Indicators for farm-level coffee sustainability, as originally determined by the GCP and the SPF Indicator Working Group. COSA--with feedback from the members of the Global Expert Committee--developed and synthesized practical metrics to operationalize the indicators so they can be functional across origins and comparable over time. The approach builds on global experience refined with tens of thousands of surveys and the expertise of the Committee members.",
  "version": "0.0.4",
  "type": "object",
  "propertyNames": {
    "description": "Property names must be in lower CamelCase",
    "pattern": "^[a-z][A-Za-z0-9_]*$"
  },
  "additionalProperties": false,
  "required": [
    "globalCoffeeDatasetId"
  ],
  "properties": {
    "globalCoffeeDatasetId": {
      "description": "The unique identifier for a dataset",
      "$ref": "/global-unique-id.json"
    },
    "schemaVersion": {
      "description": "The version number of the schema. When not provided the latest version of the schema will be used to validate the dataset",
      "type": "string",
      "pattern": "^[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}$"
    },
    "plot": {
      "description": "The plot characteristics",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "general",
        "economic"
      ],
      "properties": {
        "general": {
          "description": "The general plot characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "plotId",
            "farmId",
            "boundary",
            "area"
          ],
          "properties": {
            "plotId": {
              "title": "The unique ID of the plot",
              "description": "Globally Unique ID of the recording of the plot at a specific time and by a specific organisation.",
              "$ref": "/global-unique-id.json"
            },
            "farmId": {
              "title": "To which farm belongs this plot",
              "description": "Globally Unique ID farmId",
              "$ref": "/global-unique-id.json"
            },
            "boundary": {
              "title": "The boundary of the plot",
              "anyOf": [
                {
                  "$ref": "/MultiPolygon.json"
                },
                {
                  "$ref": "/Polygon.json"
                }
              ]
            },
            "area": {
              "title": "Area of the plot",
              "type": "number",
              "minimum": 0
            },
            "thirdPartyIds": {
              "title": "Third-party identifier",
              "description": "When this dataset is reused by another organization who needs to use their own Global Unique Identifier, the original identifier can be saved here, to track history and origin.",
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "/global-unique-id.json"
              },
              "additionalItems": false,
              "additionalProperties": false
            }
          }
        },
        "economic": {
          "description": "The economic plot characteristics",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "yield",
            "productivity"
          ],
          "properties": {
            "yield": {
              "title": "Yield",
              "description": "kgs of GBE (harvested)",
              "type": "number",
              "minimum": 0
            },
            "productivity": {
              "title": "Productivity",
              "description": "Total revenue from coffee sales minus total costs for coffee production (Reported in USD/ha of coffee productive area.)",
              "$ref": "#/definitions/positiveNumber"

            }
          }
        }
      }
    }
  },
  "definitions": {
    "percentage": {
      "title": "The percentage, 0-100",
      "description": "The percentage, from 0 to 100 with decimals allowed",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "positiveNumber": {
      "title": "A positive number > 0",
      "description": "A positive number starting at 0 with decimals allowed",
      "type": "number",
      "minimum": 0
    },
    "greaterThanZero": {
      "title": "The positive number, greater than 0",
      "description": "A positive number starting at greater than 0 with decimals allowed",
      "type": "number",
      "exclusiveMinimum": 0
    },
    "yesNo": {
      "title": "Yes-No enumeration",
      "type": "string",
      "enum": [
        "Yes",
        "No"
      ]
    }
  }
}
